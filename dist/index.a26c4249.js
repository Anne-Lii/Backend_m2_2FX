document.addEventListener("DOMContentLoaded",()=>{n();let t=document.getElementById("jobList"),e=document.getElementById("addForm");async function n(){try{let e=await fetch(" https://backend-moment2-1-oqoy.onrender.com/api/work",{method:"GET"});if(!e.ok)throw Error(`API responded with status: ${e.status}`);let n=await e.json();n.sort((t,e)=>t.enddate&&e.enddate?new Date(e.enddate)-new Date(t.enddate):t.enddate?-1:e.enddate?1:0),t&&(t.innerHTML="",n.forEach(e=>{let n=document.createElement("li");n.id=`job-${e.id}`,n.innerHTML=`
                        <h3>${e.jobtitle}</h3>
                        <p><strong>F\xf6retag:</strong> ${e.companyname}</p>
                        <p><strong>Ort:</strong> ${e.location}</p>
                        <p><strong>Startdatum:</strong> ${e.startdate?e.startdate.split("T")[0]:"Ej angivet"}</p>
                        <p><strong>Slutdatum:</strong> ${e.enddate?e.enddate.split("T")[0]:"Pågående"}</p>
                        <p><strong>Beskrivning:</strong> ${e.description}</p><br>
                        <button class="removeBtn" data-job-id="${e.id}">Ta bort jobb</button>
                        `,t.appendChild(n);let a=n.querySelector(".removeBtn");a&&a.addEventListener("click",function(t){let e=t.currentTarget.dataset.jobId;o(e)})}))}catch(t){console.error("Det uppstod ett fel:",t)}}async function o(t){let e=`https://backend-moment2-1-oqoy.onrender.com/api/work/${t}`;try{(await fetch(e,{method:"DELETE"})).ok&&document.getElementById(`job-${t}`).remove()}catch(t){console.error("Det uppstod ett fel:",t)}}async function a(t){let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};try{let t=await fetch("https://backend-moment2-1-oqoy.onrender.com/api/work",n);t.ok&&(await t.json(),e.reset(),window.location.href="index.html")}catch(t){console.error("Det uppstod ett fel:",t)}}e&&e.addEventListener("submit",function(t){t.preventDefault();let n=new FormData(e);e.querySelectorAll(".error-message").forEach(t=>t.remove());let o=function(t){let e={};return t.get("companyname")||(e.companyname="Fyll i företagsnamn!"),t.get("location")||(e.location="Fyll i ort!"),t.get("jobtitle")||(e.jobtitle="Fyll i titel!"),t.get("description")||(e.description="Fyll i beskrivning!"),t.get("startdate")||(e.startdate="Fyll i startdatum!"),e}(n);if(Object.keys(o).length>0){Object.keys(o).forEach(t=>{let n=e.querySelector(`[name=${t}]`),a=document.createElement("div");a.classList.add("error-message"),a.textContent=o[t],n.parentNode.insertBefore(a,n.nextSibling),n.addEventListener("input",function(){a.remove()})});return}a({jobtitle:n.get("jobtitle"),companyname:n.get("companyname"),location:n.get("location"),startdate:n.get("startdate"),enddate:n.get("enddate"),description:n.get("description")})})});
//# sourceMappingURL=index.a26c4249.js.map
